/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package com.pcstore.view;


import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import com.k33ptoo.components.*;

/**
 *
 * @author DUC ANH
 */
public class ServiceForm extends JPanel {


    private KGradientPanel activePanel = null;
    private JLabel activeLabel = null;

    private WarrantyServiceForm warrantyServiceForm;
    private ReturnServiceForm returnServiceForm;;
    private RepairServiceForm repairServiceForm;

    /**
     * Creates new form Service
     */
    public ServiceForm() {
    
        warrantyServiceForm = new WarrantyServiceForm();
        returnServiceForm = new ReturnServiceForm();   
        repairServiceForm = new RepairServiceForm();

        initComponents();
        initializeHoverEffects();

        selectMenu(panelWarranty, lbWarranty, warrantyServiceForm);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        panelNav = new JPanel();
        panelWarranty = new KGradientPanel();
        lbWarranty = new JLabel();
        panelReturn = new KGradientPanel();
        lbReturn = new JLabel();
        panelRepair = new KGradientPanel();
        lbRepair = new JLabel();
        panelContent = new JPanel();

        setBackground(new Color(255, 255, 255));
        setMinimumSize(new Dimension(1153, 713));
        setPreferredSize(new Dimension(1153, 713));
        setLayout(new BorderLayout());

        panelNav.setBackground(new Color(102, 153, 255));
        panelNav.setOpaque(false);
        panelNav.setPreferredSize(new Dimension(530, 40));
        panelNav.setLayout(new FlowLayout(FlowLayout.LEFT, 20, 5));

        panelWarranty.setkBorderRadius(25);
        panelWarranty.setkFillBackground(false);
        panelWarranty.setOpaque(false);
        panelWarranty.setPreferredSize(new Dimension(150, 35));
        panelWarranty.setLayout(new BorderLayout());

        lbWarranty.setBackground(new Color(255, 255, 255));
        lbWarranty.setFont(new Font("Segoe UI", 1, 14)); // NOI18N
        lbWarranty.setHorizontalAlignment(SwingConstants.CENTER);
        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle("com/pcstore/resources/vi_VN"); // NOI18N
        lbWarranty.setText(bundle.getString("WarrantyServiceW")); // NOI18N
        lbWarranty.setCursor(new Cursor(Cursor.HAND_CURSOR));
        panelWarranty.add(lbWarranty, BorderLayout.CENTER);

        panelNav.add(panelWarranty);

        panelReturn.setkBorderRadius(25);
        panelReturn.setkFillBackground(false);
        panelReturn.setOpaque(false);
        panelReturn.setPreferredSize(new Dimension(150, 35));
        panelReturn.setLayout(new BorderLayout());

        lbReturn.setBackground(new Color(255, 255, 255));
        lbReturn.setFont(new Font("Segoe UI", 1, 14)); // NOI18N
        lbReturn.setHorizontalAlignment(SwingConstants.CENTER);
        lbReturn.setText(bundle.getString("ReTurnService")); // NOI18N
        lbReturn.setCursor(new Cursor(Cursor.HAND_CURSOR));
        panelReturn.add(lbReturn, BorderLayout.CENTER);

        panelNav.add(panelReturn);

        panelRepair.setkBorderRadius(25);
        panelRepair.setkFillBackground(false);
        panelRepair.setOpaque(false);
        panelRepair.setPreferredSize(new Dimension(150, 35));
        panelRepair.setLayout(new BorderLayout());

        lbRepair.setBackground(new Color(255, 255, 255));
        lbRepair.setFont(new Font("Segoe UI", 1, 14)); // NOI18N
        lbRepair.setHorizontalAlignment(SwingConstants.CENTER);
        lbRepair.setText(bundle.getString("RepairService")); // NOI18N
        lbRepair.setCursor(new Cursor(Cursor.HAND_CURSOR));
        panelRepair.add(lbRepair, BorderLayout.CENTER);

        panelNav.add(panelRepair);

        add(panelNav, BorderLayout.NORTH);

        GroupLayout panelContentLayout = new GroupLayout(panelContent);
        panelContent.setLayout(panelContentLayout);
        panelContentLayout.setHorizontalGroup(
            panelContentLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGap(0, 1153, Short.MAX_VALUE)
        );
        panelContentLayout.setVerticalGroup(
            panelContentLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );

        add(panelContent, BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents



    // Start Hover========================================================
    private void initializeHoverEffects() {
        // Tạo mảng các cặp panel-label để xử lý một lần
        KGradientPanel[] panels = {panelWarranty, panelReturn, panelRepair};
        JLabel[] labels = {lbWarranty, lbReturn, lbRepair};
        
        // Áp dụng MouseListener cho cả panel và label
        for (int i = 0; i < panels.length; i++) {
            final KGradientPanel panel = panels[i];
            final JLabel label = labels[i];
            
            // Listener cho panel
            panel.addMouseListener(new MouseAdapter() {
                @Override
                public void mouseEntered(MouseEvent evt) {
                    hoverPanel(panel, label);
                }
                
                @Override
                public void mouseExited(MouseEvent evt) {
                    if (activePanel != panel) {
                        exitHoverPanel(panel, label);
                    }
                }
                
                @Override
                public void mouseClicked(MouseEvent evt) {
                    handleMenuClick(panel, label);
                }
            });
            
        }
    }

    private void hoverPanel(KGradientPanel panel, JLabel label) {
        panel.kFillBackground = true;
        label.setForeground(new Color(255,255,255));
        panel.repaint();
    }

    private void exitHoverPanel(KGradientPanel panel, JLabel label) {
        panel.kFillBackground = false;
        label.setForeground(new Color(0,0,0));
        panel.repaint();
    }
       /**
     * Xử lý khi click vào menu
     */
    private void handleMenuClick(KGradientPanel panel, JLabel label) {
        if (panel == panelWarranty) {
            selectMenu(panel, label, warrantyServiceForm);
        } else if (panel == panelReturn) {
            selectMenu(panel, label, returnServiceForm);
        } else if (panel == panelRepair) {
            selectMenu(panel, label, repairServiceForm);
        }
    }

    /**
     * Chọn menu và hiển thị component tương ứng
     */
    private void selectMenu(KGradientPanel panel, JLabel label, JPanel component) {
        // Bỏ chọn menu hiện tại (nếu có)
        if (activePanel != null && activeLabel != null) {
            exitHoverPanel(activePanel, activeLabel);
        }
        
        // Đánh dấu menu mới
        activePanel = panel;
        activeLabel = label;
        
        // Cập nhật giao diện của menu được chọn
        panel.setkFillBackground(true);
        panel.setkStartColor(new Color(102, 204, 255)); // Xanh dương nhạt
        panel.setkEndColor(new Color(0, 153, 255));     // Xanh dương đậm
        label.setForeground(new Color(255, 255, 255));  // Trắng
        panel.repaint();
        
        // Hiển thị component
        showComponent(component);
    }

    /**
     * Hiển thị component trong jPanel2
     */
    private void showComponent(JPanel component) {
        // Xóa tất cả các component hiện tại
        panelContent.removeAll();
        
        // Thiết lập layout
        panelContent.setLayout(new BorderLayout());
        
        // Thêm component mới
        panelContent.add(component, BorderLayout.CENTER);
        
        // Cập nhật hiển thị
        panelContent.repaint();
        panelContent.revalidate();
    }

    /**
     * Các phương thức hiển thị service cụ thể - giữ lại để tương thích ngược
     */
    private void showWarrantyService() {
        selectMenu(panelWarranty, lbWarranty, warrantyServiceForm);
    }
    
    private void showReturnService() {
        selectMenu(panelReturn, lbReturn, returnServiceForm);
    }
    
    private void showRepairService() {
        selectMenu(panelRepair, lbRepair, repairServiceForm);
    }


    // End Hover=====================================================


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private JLabel lbRepair;
    private JLabel lbReturn;
    private JLabel lbWarranty;
    private JPanel panelContent;
    private JPanel panelNav;
    private KGradientPanel panelRepair;
    private KGradientPanel panelReturn;
    private KGradientPanel panelWarranty;
    // End of variables declaration//GEN-END:variables
}
